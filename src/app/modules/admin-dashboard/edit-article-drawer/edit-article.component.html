<div class="edit-article-page">
  <app-spinner *ngIf="isLoading"></app-spinner>

  <div *ngIf="!isLoading" class="page-container">
    <div class="page-header">
      <h1>Edit Article</h1>
      <button mat-button (click)="onCancel()" class="back-btn">
        <mat-icon>arrow_back</mat-icon>
        Back to Dashboard
      </button>
    </div>

    <div class="form-container">
      <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
        
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" placeholder="Enter article title">
          <mat-error *ngIf="title?.hasError('required')">Title is required</mat-error>
          <mat-error *ngIf="title?.hasError('minlength')">Title must be at least 3 characters</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Short Description</mat-label>
          <textarea matInput formControlName="shortDescription" rows="2" placeholder="Enter short description"></textarea>
          <mat-error *ngIf="shortDescription?.hasError('required')">Short description is required</mat-error>
          <mat-error *ngIf="shortDescription?.hasError('minlength')">Short description must be at least 5 characters</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Description</mat-label>
          <textarea matInput formControlName="description" rows="4" placeholder="Enter detailed article description"></textarea>
          <mat-error *ngIf="description?.hasError('required')">Description is required</mat-error>
          <mat-error *ngIf="description?.hasError('minlength')">Description must be at least 10 characters</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Author Name</mat-label>
          <input matInput formControlName="authorName" placeholder="Enter author name">
          <mat-error *ngIf="authorName?.hasError('required')">Author name is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Article Image URL</mat-label>
          <input matInput formControlName="articleImageUrl" placeholder="Enter image URL (optional)">
        </mat-form-field>


        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Tags</mat-label>
          <input matInput formControlName="tags" placeholder="Enter tags separated by commas">
          <mat-hint>Separate tags with commas (e.g., javascript, angular, web)</mat-hint>
        </mat-form-field>


        <div class="form-actions">
          <button mat-button type="button" (click)="onCancel()" [disabled]="isSubmitting">
            Cancel
          </button>
          <button mat-raised-button color="primary" type="submit" 
                  [disabled]="editForm.invalid || isSubmitting">
            <mat-spinner diameter="20" *ngIf="isSubmitting"></mat-spinner>
            <span *ngIf="!isSubmitting">Update Article</span>
            <span *ngIf="isSubmitting">Updating...</span>
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
